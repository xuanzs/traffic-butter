<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>TrafficAI ‚Äî Intersection Intelligence</title>
  <link rel="stylesheet" href="styles.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet"/>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOP BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<header class="topbar">
  <div class="brand">
    <span class="brand-icon">‚óà</span>
    <span>TRAFFIC<em>BUTTER</em></span>
  </div>

  <div class="topbar-clock">
    <span class="clock-lbl">SIM TIME</span>
    <span id="global-clock" class="clock-val">00:00:00</span>
  </div>

  <div class="topbar-ctrl">
    <button id="btn-start" class="btn btn-primary">‚ñ∂ START</button>
    <button id="btn-pause" class="btn btn-ghost" disabled>‚è∏ PAUSE</button>
    <button id="btn-reset" class="btn btn-ghost">‚ü≥ RESET</button>
    <label class="speed-wrap">
      SPEED
      <select id="sim-speed">
        <option value="1">1√ó</option>
        <option value="2" selected>2√ó</option>
        <option value="4">4√ó</option>
      </select>
    </label>
  </div>

  <!-- Live AI edge badge -->
  <div class="adv-badge">
    <span class="adv-lbl">AI EDGE</span>
    <span id="adv-passed" class="adv-val adv-green">+0%</span>
    <span class="adv-sep">thru</span>
    <span id="adv-wait" class="adv-val adv-cyan">‚àí0%</span>
    <span class="adv-sep">wait</span>
  </div>
</header>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<main class="main">

  <!-- ‚îÄ‚îÄ‚îÄ LEFT PANEL: FIXED TIMING ‚îÄ‚îÄ‚îÄ -->
  <section class="sim-panel">

    <div class="panel-hdr">
      <span class="badge badge-fixed">FIXED TIMING</span>
      <span class="panel-title">Baseline ‚Äî <span id="fixed-green-label">15</span>s / phase (equal)</span>
    </div>

    <!-- Phase countdown -->
    <div class="phase-bar">
      <div class="phase-bar__left">
        <div class="phase-name phase-name-fixed" id="base-phase-name">N/S Straight + Right</div>
        <div class="phase-sub" id="base-phase-sub">GREEN</div>
      </div>
      <div class="phase-countdown" id="base-countdown">15</div>
      <!-- Four phase signal dots -->
      <div class="phase-lights">
        <div class="ph-light">
          <span id="base-dot-ns-sr" class="ph-dot green"></span>
          <span>N/S S+R</span>
        </div>
        <div class="ph-light">
          <span id="base-dot-ns-l" class="ph-dot red"></span>
          <span>N/S ‚Üê</span>
        </div>
        <div class="ph-light">
          <span id="base-dot-ew-sr" class="ph-dot red"></span>
          <span>E/W S+R</span>
        </div>
        <div class="ph-light">
          <span id="base-dot-ew-l" class="ph-dot red"></span>
          <span>E/W ‚Üê</span>
        </div>
      </div>
    </div>

    <!-- Stats row -->
    <div class="stat-row">
      <div class="stat-box">
        <span class="stat-lbl">Passed</span>
        <span id="base-passed" class="stat-val">0</span>
      </div>
      <div class="stat-box">
        <span class="stat-lbl">Avg Wait</span>
        <span id="base-wait" class="stat-val">0.0s</span>
      </div>
      <div class="stat-box">
        <span class="stat-lbl">Queued</span>
        <span id="base-queue" class="stat-val">0</span>
      </div>
    </div>

    <!-- Canvas -->
    <div class="canvas-wrap">
      <canvas id="canvas-baseline" width="520" height="520"></canvas>
      <div id="base-jam" class="jam-alert">‚ö† LANE JAM</div>
    </div>
  </section>

  <!-- ‚îÄ‚îÄ‚îÄ VS DIVIDER ‚îÄ‚îÄ‚îÄ -->
  <div class="divider"><span class="vs-label">VS</span></div>

  <!-- ‚îÄ‚îÄ‚îÄ RIGHT PANEL: VERTEX AI ‚îÄ‚îÄ‚îÄ -->
  <section class="sim-panel">

    <div class="panel-hdr">
      <span class="badge badge-ai">VERTEX AI</span>
      <span class="panel-title">Gemini Pro ‚Äî Dynamic Phasing</span>
    </div>

    <!-- Phase countdown -->
    <div class="phase-bar">
      <div class="phase-bar__left">
        <div class="phase-name phase-name-ai" id="ai-phase-name">N/S Straight + Right</div>
        <div class="phase-sub" id="ai-phase-sub">GREEN</div>
      </div>
      <div class="phase-countdown" id="ai-countdown" style="color:var(--cyan)">15</div>
      <div class="phase-lights">
        <div class="ph-light">
          <span id="ai-dot-ns-sr" class="ph-dot green"></span>
          <span>N/S S+R</span>
        </div>
        <div class="ph-light">
          <span id="ai-dot-ns-l" class="ph-dot red"></span>
          <span>N/S ‚Üê</span>
        </div>
        <div class="ph-light">
          <span id="ai-dot-ew-sr" class="ph-dot red"></span>
          <span>E/W S+R</span>
        </div>
        <div class="ph-light">
          <span id="ai-dot-ew-l" class="ph-dot red"></span>
          <span>E/W ‚Üê</span>
        </div>
      </div>
    </div>

    <!-- Stats row -->
    <div class="stat-row">
      <div class="stat-box">
        <span class="stat-lbl">Passed</span>
        <span id="ai-passed" class="stat-val stat-val-ai">0</span>
      </div>
      <div class="stat-box">
        <span class="stat-lbl">Avg Wait</span>
        <span id="ai-wait" class="stat-val stat-val-ai">0.0s</span>
      </div>
      <div class="stat-box">
        <span class="stat-lbl">Queued</span>
        <span id="ai-queue" class="stat-val stat-val-ai">0</span>
      </div>
    </div>

    <!-- Live AI phase duration chips -->
    <!-- <div class="ai-dur-row">
      <div class="ai-dur-chip active" id="chip-ns-sr">
        <strong id="chip-dur-ns-sr">15s</strong>
        N/S Str+Rt
      </div>
      <div class="ai-dur-chip" id="chip-ns-l">
        <strong id="chip-dur-ns-l">15s</strong>
        N/S Left
      </div>
      <div class="ai-dur-chip" id="chip-ew-sr">
        <strong id="chip-dur-ew-sr">15s</strong>
        E/W Str+Rt
      </div>
      <div class="ai-dur-chip" id="chip-ew-l">
        <strong id="chip-dur-ew-l">15s</strong>
        E/W Left
      </div>
    </div> -->

    <!-- Canvas + AI log overlay -->
    <div class="canvas-wrap">
      <canvas id="canvas-ai" width="520" height="520"></canvas>
      <div class="ai-log">
        <span class="ai-log-lbl">‚¨° GEMINI</span>
        <span id="ai-log-txt" class="ai-log-txt">Awaiting first AI decision‚Ä¶</span>
      </div>
      <div id="ai-jam" class="jam-alert">‚ö† LANE JAM</div>
    </div>
  </section>
</main>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FOOTER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<footer class="footer">

  <!-- Inject vehicles -->
  <div class="ctrl-grp">
    <span class="ctrl-title">Inject Vehicles</span>
    <span class="ctrl-sub">1/lane ‚Üí both sims</span>
    <div class="inject-grid">
      <button class="inject-btn" data-dir="north">‚Üë NORTH <span id="q-north" class="q-badge">0</span></button>
      <button class="inject-btn" data-dir="south">‚Üì SOUTH <span id="q-south" class="q-badge">0</span></button>
      <button class="inject-btn" data-dir="east"> ‚Üí EAST  <span id="q-east"  class="q-badge">0</span></button>
      <button class="inject-btn" data-dir="west"> ‚Üê WEST  <span id="q-west"  class="q-badge">0</span></button>
    </div>
  </div>

  <!-- Bulk add -->
  <div class="ctrl-grp">
    <span class="ctrl-title">Bulk Add</span>
    <span class="ctrl-sub">n vehicles per lane</span>
    <div class="bulk-row">
      <input type="number" id="bulk-count" value="5" min="1" max="20"/>
      <select id="bulk-dir">
        <option value="north">North</option>
        <option value="south">South</option>
        <option value="east">East</option>
        <option value="west">West</option>
        <option value="all">All dirs</option>
      </select>
      <button class="btn btn-primary" id="btn-bulk-add">ADD</button>
    </div>
  </div>

  <!-- CSV schedule -->
  <div class="ctrl-grp" style="visibility: hidden;">
    <span class="ctrl-title">CSV Schedule</span>
    <span class="ctrl-sub">time,north,south,east,west</span>
    <label class="csv-wrap">
      <input type="file" id="csv-input" accept=".csv"/>
      <span class="csv-lbl">üìÇ Import CSV</span>
    </label>
  </div>

  <!-- Queue comparison bars -->
  <div class="ctrl-grp" style="flex:1">
    <span class="ctrl-title">Queue ‚Äî Fixed / AI</span>
    <span class="ctrl-sub"><span style="color:var(--orange)">‚ñ†</span> Fixed &nbsp;<span style="color:var(--cyan)">‚ñ†</span> AI</span>
    <div class="queue-bars">
      <div class="q-row">
        <span class="q-let">N</span>
        <div class="q-bars-wrap">
          <div class="q-bar q-bar-base" id="qbar-base-n" style="width:0%"></div>
          <div class="q-bar q-bar-ai"   id="qbar-ai-n"   style="width:0%"></div>
        </div>
        <span id="qlbl-n" class="q-lbl">0/0</span>
      </div>
      <div class="q-row">
        <span class="q-let">S</span>
        <div class="q-bars-wrap">
          <div class="q-bar q-bar-base" id="qbar-base-s" style="width:0%"></div>
          <div class="q-bar q-bar-ai"   id="qbar-ai-s"   style="width:0%"></div>
        </div>
        <span id="qlbl-s" class="q-lbl">0/0</span>
      </div>
      <div class="q-row">
        <span class="q-let">E</span>
        <div class="q-bars-wrap">
          <div class="q-bar q-bar-base" id="qbar-base-e" style="width:0%"></div>
          <div class="q-bar q-bar-ai"   id="qbar-ai-e"   style="width:0%"></div>
        </div>
        <span id="qlbl-e" class="q-lbl">0/0</span>
      </div>
      <div class="q-row">
        <span class="q-let">W</span>
        <div class="q-bars-wrap">
          <div class="q-bar q-bar-base" id="qbar-base-w" style="width:0%"></div>
          <div class="q-bar q-bar-ai"   id="qbar-ai-w"   style="width:0%"></div>
        </div>
        <span id="qlbl-w" class="q-lbl">0/0</span>
      </div>
    </div>
  </div>

</footer>

<script src="app.js"></script>
</body>
</html>
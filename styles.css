/* ═══════════════════════════════════════════════
   TrafficAI v6 — styles.css
   Dark terminal theme
═══════════════════════════════════════════════ */

:root {
  --bg0:    #080b0f;
  --bg1:    #0d1117;
  --bg2:    #111820;
  --bg3:    #161e28;
  --border: #1e2a38;
  --brite:  #253344;

  --text:   #b8c8d8;
  --dim:    #4a5f75;
  --bright: #ddeeff;

  --orange: #f07030;
  --cyan:   #00ccff;
  --green:  #30d080;
  --yellow: #f0c830;
  --red:    #ff4040;

  --ff-ui:   'Rajdhani', sans-serif;
  --ff-data: 'Share Tech Mono', monospace;
  --r:       4px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  height: 100%;
  background: var(--bg0);
  color: var(--text);
  font-family: var(--ff-ui);
  overflow: hidden;
}

/* ── TOP BAR ─────────────────────────────────── */
.topbar {
  display: flex;
  align-items: center;
  gap: 16px;
  height: 48px;
  padding: 0 16px;
  background: var(--bg1);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.brand {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 16px;
  font-weight: 700;
  letter-spacing: 3px;
  color: var(--bright);
  flex-shrink: 0;
}
.brand-icon { color: var(--cyan); font-size: 18px; }
.brand em   { color: var(--cyan); font-style: normal; }

.topbar-clock {
  display: flex;
  align-items: baseline;
  gap: 6px;
  margin-left: auto;
}
.clock-lbl { font-size: 8px; letter-spacing: 2px; color: var(--dim); }
.clock-val {
  font-family: var(--ff-data);
  font-size: 20px;
  color: var(--green);
  text-shadow: 0 0 12px #30d08050;
}

.topbar-ctrl { display: flex; align-items: center; gap: 8px; }

.btn {
  font-family: var(--ff-ui);
  font-weight: 700;
  font-size: 11px;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  padding: 5px 14px;
  border-radius: var(--r);
  cursor: pointer;
  border: 1px solid;
  transition: 120ms ease;
}
.btn-primary { background: var(--cyan); border-color: var(--cyan); color: #000; }
.btn-primary:hover { background: #33ddff; }
.btn-ghost { background: transparent; border-color: var(--brite); color: var(--text); }
.btn-ghost:hover:not(:disabled) { border-color: var(--text); color: var(--bright); }
.btn:disabled { opacity: .35; cursor: not-allowed; }

.speed-wrap {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 9px;
  letter-spacing: 1px;
  color: var(--dim);
}
.speed-wrap select {
  background: var(--bg3);
  border: 1px solid var(--brite);
  color: var(--text);
  padding: 3px 6px;
  border-radius: var(--r);
  font-family: var(--ff-data);
  font-size: 11px;
}

.adv-badge {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 3px 10px;
  background: rgba(0,204,255,.05);
  border: 1px solid rgba(0,204,255,.18);
  border-radius: var(--r);
  flex-shrink: 0;
}
.adv-lbl   { font-size: 8px; letter-spacing: 2px; color: var(--dim); }
.adv-val   { font-family: var(--ff-data); font-size: 13px; font-weight: 700; }
.adv-green { color: var(--green); }
.adv-cyan  { color: var(--cyan); }
.adv-sep   { font-size: 9px; color: var(--dim); }

/* ── MAIN AREA ───────────────────────────────── */
.main {
  display: flex;
  height: calc(100vh - 48px - 106px);
  overflow: hidden;
}

/* ── SIMULATION PANEL ────────────────────────── */
.sim-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 8px 10px;
  gap: 5px;
  min-width: 0;
  background: var(--bg0);
}

.panel-hdr {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}
.badge {
  font-size: 8px;
  font-weight: 700;
  letter-spacing: 2px;
  padding: 2px 8px;
  border-radius: 2px;
  text-transform: uppercase;
}
.badge-fixed { background: rgba(240,112,48,.12); border: 1px solid var(--orange); color: var(--orange); }
.badge-ai    {
  background: rgba(0,204,255,.08); border: 1px solid var(--cyan); color: var(--cyan);
  animation: ai-pulse 2s ease infinite;
}
@keyframes ai-pulse {
  0%,100%{ box-shadow: 0 0 0 0 rgba(0,204,255,.3); }
  50%    { box-shadow: 0 0 0 4px rgba(0,204,255,0); }
}
.panel-title { font-size: 12px; font-weight: 600; letter-spacing: 1px; color: var(--dim); }

/* Phase bar */
.phase-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--r);
  padding: 5px 10px;
  flex-shrink: 0;
}
.phase-bar__left { flex: 1; }
.phase-name { font-size: 11px; font-weight: 700; letter-spacing: .5px; }
.phase-name-fixed { color: var(--orange); }
.phase-name-ai    { color: var(--cyan); }
.phase-sub  { font-size: 8px; color: var(--dim); letter-spacing: 1px; }
.phase-countdown {
  font-family: var(--ff-data);
  font-size: 26px;
  font-weight: 700;
  min-width: 46px;
  text-align: right;
  color: var(--green);
}
.phase-lights { display: flex; gap: 8px; }
.ph-light {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  font-size: 7px;
  letter-spacing: .5px;
  color: var(--dim);
}
.ph-dot {
  width: 10px; height: 10px; border-radius: 50%;
  background: #ff333333;
  transition: background .2s, box-shadow .2s;
}
.ph-dot.green  { background: var(--green);  box-shadow: 0 0 7px var(--green); }
.ph-dot.yellow { background: var(--yellow); box-shadow: 0 0 7px var(--yellow); }
.ph-dot.red    { background: #ff333344; box-shadow: none; }

/* Stat row */
.stat-row {
  display: flex;
  gap: 5px;
  flex-shrink: 0;
}
.stat-box {
  flex: 1;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--r);
  padding: 4px 8px;
  display: flex;
  flex-direction: column;
  gap: 1px;
}
.stat-lbl { font-size: 7px; letter-spacing: 1.5px; color: var(--dim); text-transform: uppercase; }
.stat-val { font-family: var(--ff-data); font-size: 16px; color: var(--bright); }
.stat-val-ai { color: var(--cyan); }

/* AI phase duration chips */
.ai-dur-row {
  display: flex;
  gap: 4px;
  flex-shrink: 0;
}
.ai-dur-chip {
  flex: 1;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--r);
  padding: 3px 6px;
  font-size: 8px;
  font-family: var(--ff-data);
  color: var(--dim);
  text-align: center;
  transition: border-color .3s, background .3s;
}
.ai-dur-chip strong {
  display: block;
  font-size: 13px;
  color: var(--text);
  transition: color .3s;
}
.ai-dur-chip.active {
  border-color: var(--cyan);
  background: rgba(0,204,255,.06);
}
.ai-dur-chip.active strong {
  color: var(--cyan);
  text-shadow: 0 0 8px var(--cyan);
}

/* Canvas wrap */
.canvas-wrap {
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 6px;
  overflow: hidden;
  min-height: 0;
}
canvas { display: block; max-width: 100%; max-height: 100%; }

/* AI log bubble */
.ai-log {
  position: absolute;
  bottom: 6px; left: 6px; right: 6px;
  background: rgba(0,12,24,.88);
  border: 1px solid rgba(0,204,255,.2);
  border-radius: var(--r);
  padding: 4px 8px;
  display: flex;
  gap: 6px;
  font-size: 9px;
  font-family: var(--ff-data);
  max-height: 38px;
  overflow: hidden;
  pointer-events: none;
}
.ai-log-lbl { color: var(--cyan); opacity: .7; font-weight: 700; flex-shrink: 0; }
.ai-log-txt { color: var(--text); opacity: .8; line-height: 1.4; }

/* Jam alert */
.jam-alert {
  position: absolute;
  top: 6px; right: 6px;
  background: rgba(255,40,40,.12);
  border: 1px solid var(--red);
  border-radius: var(--r);
  padding: 3px 8px;
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1px;
  color: var(--red);
  display: none;
}
.jam-alert.visible {
  display: block;
  animation: jam-blink 1s ease infinite;
}
@keyframes jam-blink { 0%,100%{opacity:1} 50%{opacity:.45} }

/* VS divider */
.divider {
  width: 2px;
  flex-shrink: 0;
  background: linear-gradient(to bottom, transparent, var(--brite) 20%, var(--brite) 80%, transparent);
  display: flex;
  align-items: center;
  justify-content: center;
}
.vs-label {
  position: absolute;
  background: var(--bg1);
  border: 1px solid var(--brite);
  padding: 5px 3px;
  font-size: 8px;
  font-weight: 700;
  letter-spacing: 2px;
  color: var(--dim);
  border-radius: 2px;
  writing-mode: vertical-rl;
}

/* ── FOOTER ──────────────────────────────────── */
.footer {
  height: 106px;
  display: flex;
  background: var(--bg1);
  border-top: 1px solid var(--border);
  flex-shrink: 0;
}

.ctrl-grp {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 4px;
  padding: 6px 14px;
  border-right: 1px solid var(--border);
}
.ctrl-grp:last-child { border-right: none; }
.ctrl-title { font-size: 7px; font-weight: 700; letter-spacing: 2.5px; color: var(--dim); text-transform: uppercase; }
.ctrl-sub   { font-size: 8px; color: var(--dim); opacity: .7; }

.inject-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 3px; }
.inject-btn {
  background: var(--bg3);
  border: 1px solid var(--brite);
  color: var(--text);
  font-family: var(--ff-ui);
  font-size: 10px;
  font-weight: 600;
  padding: 4px 8px;
  border-radius: var(--r);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  transition: 120ms;
  white-space: nowrap;
}
.inject-btn:hover { border-color: var(--cyan); color: var(--cyan); }
.q-badge {
  font-family: var(--ff-data);
  font-size: 9px;
  background: rgba(255,255,255,.07);
  padding: 1px 4px;
  border-radius: 2px;
}

.bulk-row { display: flex; gap: 5px; align-items: center; }
.bulk-row input {
  width: 46px;
  background: var(--bg3);
  border: 1px solid var(--brite);
  color: var(--text);
  padding: 4px;
  border-radius: var(--r);
  font-family: var(--ff-data);
  font-size: 12px;
  text-align: center;
}
.bulk-row select {
  background: var(--bg3);
  border: 1px solid var(--brite);
  color: var(--text);
  padding: 4px 6px;
  border-radius: var(--r);
  font-size: 11px;
}

.csv-wrap { position: relative; cursor: pointer; }
.csv-wrap input[type=file] { position: absolute; inset: 0; opacity: 0; cursor: pointer; }
.csv-lbl {
  display: block;
  background: var(--bg3);
  border: 1px dashed var(--brite);
  padding: 4px 10px;
  border-radius: var(--r);
  font-size: 11px;
  color: var(--text);
  transition: 120ms;
}
.csv-wrap:hover .csv-lbl { border-color: var(--cyan); color: var(--cyan); }

/* Queue bars */
.queue-bars { display: flex; flex-direction: column; gap: 4px; }
.q-row { display: flex; align-items: center; gap: 6px; }
.q-let { font-family: var(--ff-data); font-size: 9px; color: var(--dim); width: 10px; }
.q-bars-wrap { flex: 1; display: flex; flex-direction: column; gap: 2px; max-width: 140px; }
.q-bar { height: 5px; border-radius: 2px; transition: width .3s ease; min-width: 2px; }
.q-bar-base { background: #f0703088; }
.q-bar-ai   { background: #00ccff88; }
.q-lbl { font-family: var(--ff-data); font-size: 9px; color: var(--dim); min-width: 30px; }

/* Scrollbar */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: var(--bg0); }
::-webkit-scrollbar-thumb { background: var(--brite); border-radius: 2px; }